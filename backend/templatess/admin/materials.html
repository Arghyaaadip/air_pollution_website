{% extends "base.html" %}
{% block title %}Manage Materials{% endblock %}
{% block content %}
  <h1>Manage Curated Materials</h1>
  <p><a href="{{ url_for('admin_dashboard') }}">‚Üê Back to Dashboard</a></p>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class="mt-3">
        {% for category, msg in messages %}
          <li class="alert alert-{{ category }}">{{ msg }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <h2 class="mt-4">Existing Materials</h2>
  <table class="table table-bordered mt-2">
    <thead><tr><th>Title</th><th>URL</th></tr></thead>
    <tbody>
      {% for row in rows[1:] %}
        <tr>
          <td>{{ row[0] }}</td>
          <td><a href="{{ row[1] }}" target="_blank">{{ row[1] }}</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2 class="mt-4">Add New Material</h2>
  <form method="post" action="{{ url_for('add_material') }}" class="mt-2">
    <div class="form-group">
      <label>Title</label>
      <input name="title" class="form-control" required>
    </div>
    <div class="form-group">
      <label>URL</label>
      <input name="url" type="url" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">Add Material</button>
  </form>
{% endblock %}
